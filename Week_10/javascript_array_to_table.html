<body>
<script src="pretty_json.js"></script>
<script>
    var listOfObjects = [
        {id: 123, name: "Kevin", dob: "1/1/2011"},
        {id: 456, name: "Bob", dob: "2/2/2012"}
    ];

    //TODO: Make a table from the data above

    //Extra Credit 1: Add Headings
    //Extra Credit 2: Add Headings without a second loop.

    function arrayToTableStrings(listOfObjects) {

        var outputTable = "<table>\n";

        //headings
        outputTable += "<tr>";
        var properties = Object.keys(listOfObjects[0]);
        for (var p = 0; p < properties.length; p++) {
            var property_name = properties[p];
            outputTable += "<th>";
            outputTable += property_name;
            outputTable += "</th>";
        }
        outputTable += "</tr>\n";

        for (var i = 0; i < listOfObjects.length; i++) {
            var item = listOfObjects[i];
            outputTable += "<tr>";

            for (var p = 0; p < properties.length; p++) {
                var property_name = properties[p];
                outputTable += "<td>";
                outputTable += item[property_name];
                outputTable += "</td>";

            }
            outputTable += "</tr>\n";

        }
        outputTable += "</table>\n";

        return outputTable;
    }

    function arrayToTableElements(inputArray) {

        var outputTable = document.createElement("table");

        //headings
        var tr = document.createElement("tr");
        var properties = Object.keys(inputArray[0]);
        for (var p = 0; p < properties.length; p++) {
            var propertyName = properties[p];
            var th = document.createElement("th");
            th.innerHTML = propertyName;
            tr.appendChild(th);
        }
        outputTable.appendChild(tr);

        for (var i = 0; i < inputArray.length; i++) {
            var item = inputArray[i];
            var tr = document.createElement("tr");
            var properties = Object.keys(inputArray[0]);
            for (var p = 0; p < properties.length; p++) {
                var propertyName = properties[p];
                var td = document.createElement("td");
                td.innerHTML = item[propertyName];
                tr.appendChild(td);
            }
            outputTable.appendChild(tr);
        }
        return (outputTable);
    }

    function init() {
        var resultString = arrayToTableStrings(listOfObjects);
        resultString = resultString.replace(/</g, "&lt;");
        resultString = resultString.replace(/>/g, "&gt;");
        document.body.innerHTML += "<pre>" + resultString + "</pre>";
        var resultTable = arrayToTableElements(listOfObjects);
        document.body.appendChild(resultTable);

    }
    document.addEventListener("DOMContentLoaded", init);
</script>
</body>